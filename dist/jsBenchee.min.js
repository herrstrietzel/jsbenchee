!function(e){"use strict";async function t(e=[],t="",r=25,a=!0,i={},l="",o=""){let c={name:t,average:0,lowest:0,highest:0,timings:[]},u=document.getElementById(l),m=i[l],h=[],d=[],g=[],p="",f="",j="",w=0;if(!m){for(let t=0,n=e.length;n&&t<n;t++){let n=e[t],r=n.split(".")?.slice(-1)[0]||null,i=!!r&&("js"===r||"cjs"===r||"mjs"===r),l=n.startsWith("https://")||n.startsWith("http://")||n.startsWith("//"),o=0;n.includes("import")?g.push(n):i||l?h.push(n):(a&&(o=s(n),o>1&&(n="const jsBencheeHarmful=true")),d.push(n))}p=await n(g,l,"module",a,o),f=await n(h,l,"external",a,o),j=await n(d,l,"",a,o)}const y=async(e="",t="",n="",s={},r="")=>{u||(u=document.createElement("iframe"),u.id=r,u.style.display="none",u.sandbox="allow-scripts",document.body.append(u));let a="";if(s[r])a=s[r];else{a=`data:text/html,${encodeURIComponent(`<!DOCTYPE html>\n            <html>\n            <head>\n                <meta charset="UTF-8">\n                ${t}\n            </head>\n            <body>\n                ${e}\n                ${n}\n            </body>\n            </html>`)}`,s[r]=a}u.src=a};return new Promise((e=>{window.addEventListener("message",(function t(n){let{benchmarkResult:s,error:a,value:m}=n.data,h=n.data.hasOwnProperty("benchmarkResult"),d=n.data.ID===l;if(a)c.error=a,e(c);else if(d&&n.data&&h)if(o&&m&&(m="object"==typeof m?Array.isArray(m)?m:JSON.stringify(m):m,c.value=m),c.timings.push(s),w++,w<r)y(p,f,j,i,l);else{window.removeEventListener("message",t);let n=[...c.timings].sort(((e,t)=>e-t));c.lowest=+n[0].toFixed(3);let s=n.reduce(((e,t)=>e+t),0)/n.length;c.average=s;let r=n.reverse(),a=r[0];a>2*s&&(c.timings.splice(c.timings.indexOf(a),1),r.shift(),a=r[0],s=c.timings.reduce(((e,t)=>e+t),0)/c.timings.length,c.average=+s.toFixed(9)),c.highest=+a.toFixed(3),c.timings=[...c.timings],e(c),u.contentWindow.location.replace("about:blank"),performance.clearResourceTimings(),performance.clearMarks(),performance.clearMeasures(),u.remove()}})),y(p,f,j,i,l)}))}async function n(e=[],t="",n="",r=!0,a=""){const i=async(e,t=!0)=>{let n="",r=await fetch(e);if(r.ok){let e=await r.text();if(t){s(e)>1&&(e="const jsBencheeHarmful=true")}n=`data:text/javascript,${encodeURIComponent(e)}`}return n},l=async(e,t=!0)=>{let n=/import\s+(.*?)\s+from\s+['"](.*?)['"]/g,s=Array.from(e.matchAll(n)),r=[];for(let e=0,n=s.length;n&&e<n;e++){let[n,a,l]=s[e],o=await i(l,t),c=n.replaceAll(l,o);r.push(`${c}`)}return{imports:r,body:e.replace(n,"").replaceAll(";","").trim()}};let o="",c=n?"":'"use strict";\n',u="",m="",h="",d=n?`type="${n}" `:n;if(!e.length)return"";if(n&&"external"!==n)for(let t=0;t<e.length;t++){let n=e[t],s=await l(n,r),{imports:a,body:i}=s;m+=a.length?a.join("\n"):"",u+=i?i+"\n":""}else if(n&&"external"===n)for(let t=0;t<e.length;t++){let n=e[t];h+=`<script src="${await i(n,r)}" defer><\/script>\n`}else u=e.join("\n");return o+=`\n        ${h}\n        <script ${d}>\n        ${m}\n        ${c}\n        const iframeID = '${t}';\n        // disable alerts\n        window.alert = () => ()=>{let noalert=''};\n        window.addEventListener('load', () => {\n            const winOrigin = document.referrer;\n            let returnValue = '';\n            try {\n                let duration = 0;\n                const start = performance.now();\n                ${u};\n                duration = performance.now() - start;\n                ${a?`if(typeof ${a} !== 'undefined'){\n        returnValue = ${a} ? ${a} : "";\n    }\n`:""}\n                parent.postMessage({ benchmarkResult: duration, value:returnValue, ID:iframeID, winOrigin: winOrigin}, '*');\n\n            } catch (err) {\n                parent.postMessage({ error: err.message }, '*');\n            }\n        });\n    <\/script>`,o}function s(e){let t=0;const n={};return[{regex:/eval\s*\(/g,score:1},{regex:/new\s+Function\s*\(/g,score:1},{regex:/setTimeout\s*\(/g,score:.1},{regex:/setInterval\s*\(/g,score:.1},{regex:/document\.write\s*\(/g,score:.5},{regex:/innerHTML\s*=/g,score:.3}].forEach((({regex:s,score:r})=>{const a=[...e.matchAll(s)];a.length&&(n[s]=a.length,t+=a.length*r)})),(n[/eval\s*\(/g]||n[/new\s+Function\s*\(/g])&&n[/setTimeout\s*\(/g]&&(t+=2),(n[/eval\s*\(/g]||n[/new\s+Function\s*\(/g])&&(n[/document\.write\s*\(/g]||n[/innerHTML\s*=/g])&&(t+=1),+t.toFixed(2)}var r=function({tests:e=[],iterations:n=25,target:s="",render:r=!1,agentDetection:a=!1,exportMD:i=!1,security:l=!0,multipass:o=1,multitask:c=!0,includeColumns:u=[],addCSS:m=!0,returnVar:h=""}={}){return new Promise((async d=>{this.tests=e,this.iterations=n,this.target=s,this.render=r,this.agentDetection=a,this.includeColumns=u,this.multipass=o,this.multitask=c,this.exportMD=i,this.security=l,this.addCSS=m,this.returnVar=h;let g="";a&&(g=function(){let e="",t=[],n="",s="";if(navigator.userAgentData)({brands:t,platform:s}=navigator.userAgentData),n=t.slice(-1)[0],e=`${n.brand}/${n.version} ${s}`;else if(navigator.userAgent){let t=navigator.userAgent.split(" ");n=t.slice(-1)[0],s=t[1].replace(/\(/g,""),e=`${n} ${s}`}return e}());const p=(e,t)=>{for(let n in e){let s=e[n],r=t[n];Array.isArray(s)?e[n]=[...s,...r]:isNaN(s)||(e[n]=(s+r)/2)}return e};let f={results:[],names:[...new Set(e.map((e=>e.name)))],agent:g,iterations:n,multipass:o,multitask:c,returnVar:h},j={};await(async()=>{m&&await async function(){let e=function(e=1){let t="";try{let n=(new Error).stack.split("\n")[e+1].split("@").pop();t=Array.from(n.matchAll(/\(([^()]*)\)/g))[0][1].split("/").slice(0,-1).join("/")}catch{console.log("could not parse path")}return t}()+"/jsBenchee.css",t=await fetch(e);if(t.ok){let e=await t.text(),n=document.getElementById("jsBencheeStyles");n||(n=document.createElement("style"),n.textContent=e,document.head.append(n))}}();let i=null,d=null,w=null,y=a?`<p class="jsBenchee-p"><strong>Agent:</strong> ${g} <strong>Iterations:</strong> ${n}  <strong>Multipass:</strong> ${o} <strong>Multitask:</strong>${c}<p>`:`<p class="jsBenchee-p"><strong>Iterations:</strong> ${n}  <strong>Multipass:</strong> ${o} <strong>Multitask:</strong>${c}<p>`,$=`\n        <div class="jsBenchee-wrap">\n            <p class="jsBenchee-heading">Benchmarking <strong>${e.map((e=>`»${e.name}«`)).join(", ")}</strong>\n                <span class="jsBenchee-progress">– please wait \n                <svg class="icnSpinner jsBenchee-spinner" viewBox="0 0 100 100">\n                    <path stroke="currentColor" stroke-linejoin="round" fill="none" d="M 50 10 a 40 40 0  1 1 -40 40">\n                        <animateTransform attributeName="transform" type="rotate" dur="0.75s" values="0 50 50;360 50 50" repeatCount="indefinite"></animateTransform></path>\n                </svg>\n            </span>\n            </p>\n            <section class="jsBenchee-section jsBenchee-summary">${y}<p class="jsBenchee-p"><strong>Note:</strong> It is recommended to close them while running benchmark test for more realistic results.<p></section>\n            <section class="jsBenchee-section jsBenchee-results"></section>\n            <section class="jsBenchee-section jsBenchee-conclusion"></section>\n            <details class="jsBenchee-details jsBenchee-markdown">\n                <summary class="jsBenchee-summary">MD output</summary>\n                <pre><code class="jsBenchee-md"></code></pre>\n            </details>\n        </div>`;if(i=(new DOMParser).parseFromString($,"text/html").querySelector(".jsBenchee-wrap"),d=i.querySelector(".jsBenchee-results"),i.querySelector(".jsBenchee-conclusion"),w=i.querySelector(".jsBenchee-md"),s=s&&r?document.querySelector(`${s}`):null,r&&!s){let e=document.createElement("article");e.id=s.replace(/#|\./gi,""),s=e}r&&s&&s.append(i),o=o||1;const B=e.map((()=>crypto.randomUUID()));for(let s=0;s<o;s++)if(c){let r=e.map(((e,s)=>t(e.scripts,e.name,n,l,j,B[s],h).catch((t=>({name:e.name,error:t.message,average:0,iterations:[],results:[]})))));(await Promise.allSettled(r)).forEach((e=>{let t=e.value;if(0===s)f.results.push(t);else if(s>0&&o>1){let e=f.results.find((e=>e.name===t.name));p(e,t)}}))}else for(let r=0,a=e.length;a&&r<a;r++){const{scripts:a,name:i}=e[r],c=await t(a,i,n,l,j,B[r],h);if(0===s)f.results.push(c);else if(s>0&&o>1){let e=f.results.find((e=>e.name===c.name));p(e,c)}}let{html:v,md:x}=function(e,t=[]){let{results:n,agent:s="",names:r,iterations:a,multipass:i,multitask:l}=e;n.sort(((e,t)=>e.average-t.average));let o="";0===n[0].average&&(o+=`»${n[0].name}« could not be benchmarked`,n.shift());let c="";c+='<table class="jsBenchee-table">',t.length&&(n=((e,t=[])=>t.length?e.map((e=>{const n={};return(t&&t.length?t:Object.keys(e)).forEach((t=>{e.hasOwnProperty(t)&&(n[t]=e[t])})),n})):e)(n,t)),c+='<thead class="jsBenchee-thead">\n<tr class="jsBenchee-tr">';let u=Object.keys(n[0]);c+=u.map((e=>`<th class="jsBenchee-th">${e}</th>`)).join("\n"),c+="</tr>\n</thead>";let m="";m+=`**Scripts:** ${r.join(", ")}  \n`,m+=s?`**Agent:** ${s} `:"",m+=i?`**Multipass:** ${i} `:"",m+=l?`**Multitask:** ${l} `:"",m+=`**Iterations:** ${a} \n\n`,m+="| "+u.map(((e,t)=>`${e} | `)).join(" ")+"\n",m+="| "+u.map(((e,t)=>0===t?":--- | ":"---: | ")).join(" ")+"\n",c+='<tbody class="jsBenchee-tbody">',n.forEach(((e,t)=>{c+='<tr class="jsBenchee-tr">',m+="| ";for(let t in e){let n=e[t];n=Array.isArray(n)?n.map((e=>e&&!isNaN(e)?+e.toFixed(3):e)).join(", "):n,!isNaN(n)&&n&&(n="average"===t?+n.toFixed(1):+n.toFixed(3)),c+=`<td class="jsBenchee-td"><span class="jsBenchee-td-label">${t}:</span> <span class="jsBenchee-td-value">${n}</span></td>`,m+=` ${n} | `}c+="</tr>",m+="\n"})),c+="</tbody>",c+="</table>",n.sort(((e,t)=>e.average-t.average));let h=n[0],d=+h.average.toFixed(3),g=n.length,p='<ul class="jsBenchee-ul">',f="";for(let e=0;g&&e<g;e++){let t=n[e],s=1,{name:r,average:a,timings:i}=t,l="";0===e?l=`»${h.name}« is the fastest executing with an average of ${d} ms`:(s=+(a/d).toFixed(3),l=`»${r}« is ~ ${s} times / ~ ${+(100*(s-1)).toFixed(0)}% slower than »${h.name}«`),p+=`<li class="jsBenchee-li">${l}</li>`,f+=`* ${l}  \n`}return o&&(p+=`<li class="jsBenchee-li">${o}</li>`,f+=`* ${o}  \n`),p+="</ul>",c+=p,m+="\n \n"+f,{html:c,md:m}}(f,u);f.resultMd=x,f.resultHtml=v,f.resultsJSON=JSON.stringify({agent:g,iterations:n,results:f.results}),i.classList.add("jsBenchee-completed"),r&&s&&(d.insertAdjacentHTML("beforeend",v),w.textContent="\n"+x),j={}})(),d(f)}))};"undefined"!=typeof window&&(window.jsBenchee=r),e.jsBenchee=r}(this.jsBenchee=this.jsBenchee||{});
